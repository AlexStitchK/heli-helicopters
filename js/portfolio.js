!function(v){v.fn.portfolio=function(i){var u=v.extend({},{image:{width:600,height:400,margin:20},path:{width:10,height:10,marginTop:5,marginLeft:5},animationSpeed:400},i);return this.each(function(){var c=v(this),l={init:function(){this.set.position(),this.paths.draw(),this.paths.go(),this.animate.item()},set:{position:function(){c.find(".item").each(function(i){var t=v(this);t.css({left:(u.image.width+u.image.margin)*i+"px"}),t.find("div").each(function(i){v(this).css({top:(u.image.height+u.image.margin)*i+"px"})})})}},paths:{draw:function(){c.append(v("<div />").addClass("paths"));var a=c.find(".paths");c.find(".item").each(function(t){var i=v(this).find("div");a.append(v("<div />").addClass("path"+t).css({width:u.path.width+"px",left:(u.path.width+u.path.marginLeft)*t+"px"})),i.each(function(i){v("<a />").attr({href:"#",rel:i}).css({width:u.path.width+"px",height:u.path.height+"px",top:(u.path.height+u.path.marginTop)*i+"px"}).appendTo(a.find(".path"+t))})}),a.find(".path0").find("a").eq(0).addClass("active")},go:function(){c.find(".paths").find("a").click(function(){var i=v(this),t=(c.find(".paths").find("a"),i.parent("div").attr("class").split("path")[1]),a=i.attr("rel"),n=c.find(".inside"),e=a*(u.image.height+u.image.margin),s=t*(u.image.width+u.image.margin);return n.animate({top:-e+"px",left:-s+"px"},u.animationSpeed,function(){l.position.get(n)}),!1})},classes:function(n,e){var i=c.find(".paths").find("a"),t=i.filter(function(){var i=v(this),t=i.parent("div").attr("class").split("path")[1],a=i.attr("rel");return t==n&&a==e});i.removeClass("active"),t.addClass("active")}},animate:{item:function(){var i={top:"-="+(u.image.height+u.image.margin)+"px"},t={top:"+="+(u.image.height+u.image.margin)+"px"},a={top:0,left:"-="+(u.image.width+u.image.margin)+"px"},n={top:0,left:"+="+(u.image.width+u.image.margin)+"px"};l.animate.img(".down",i,40),l.animate.img(".up",t,38),l.animate.img(".next",a,39),l.animate.img(".prev",n,37)},img:function(t,a,n){var e=c.find(".inside"),i=v.browser.mozilla?"keypress":"keydown";v(t).click(function(){var i=v(this);return i.hasClass("active")||e.animate(a,u.animationSpeed,function(){l.position.get(e),i.removeClass("active")}),i.addClass("active"),!1}),v(document).bind(i,function(i){return(i.keyCode?i.keyCode:i.which)==n&&v(t).is(":visible")&&(e.is(":animated")||e.animate(a,u.animationSpeed,function(){l.position.get(e)})),!1})}},position:{get:function(i){var t=i.position().top,a=i.position().left;l.position.check(t,a)},check:function(i,t){i=v.browser.msie&&8==parseInt(v.browser.version)&&0!=i?i-1:i;var a=c.find(".item"),n=a.length-1,e=-n*(u.image.width+u.image.margin),s=t*n/e,h=a.filter(function(){return parseInt(v(this).css("left"))==-t}).find("div").length-1,o=-h*(u.image.height+u.image.margin),d=i*h/o,p=c.find(".arrows"),r=p.find(".up"),m=p.find(".down"),f=p.find(".next"),g=p.find(".prev");t==e?f.hide():f.show(),t<0?g.show():g.hide(),i==o?m.hide():m.show(),i<0?r.show():r.hide(),l.paths.classes(s,d)}}};l.init()})}}(jQuery);